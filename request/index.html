<form id="requestForm" action="https://formspree.io/f/xqabdeko" method="POST">
  <label for="name">Name:</label><br/>
  <input type="text" id="name" name="name" required /><br/>

  <label for="song">Song Name & Artist:</label><br/>
  <input type="text" id="song" name="song" required /><br/>

  <button type="submit">Submit Request</button>
</form>

<div id="confirmation" style="display:none; font-size: 2rem; color: green; margin-top: 1em;">&#10003; Submitted!</div>

<script>
  const form = document.getElementById('requestForm');
  const confirmation = document.getElementById('confirmation');

  form.addEventListener('submit', async (e) => {
    e.preventDefault(); // prevent normal submission

    const formData = new FormData(form);
    try {
      const response = await fetch(form.action, {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      });

      if (response.ok) {
        form.style.display = 'none';       // hide form
        confirmation.style.display = 'block';  // show tick

        // Redirect back after 2 seconds
        setTimeout(() => {
          window.location.href = 'https://bb-cb.github.io/Karaoke-list/no-checkboxes/index.html'; 
        }, 2000);
      } else {
        alert('Oops! There was a problem submitting your form.');
      }
    } catch (error) {
      alert('Oops! There was a problem submitting your form.');
    }
  });
</script>
